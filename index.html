<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="colores.css">
    <link rel="stylesheet" href="comentarios.css">
    <link rel="stylesheet" href="comentarios2.css">
    <title>Susurros desde la Ventana</title>

</head>

<body>
    <header>
        <div class="title-block">
            <h1>Susurros desde la Ventana</h1>
            <button id="themeToggle" onclick="toggleTheme()">Cambiar tema</button>
            <p>Textos escritos desde adentro, en días de lluvia y días de ruido.</p>
        </div>
        <div class="header-image">Imagen aquí</div>
    </header>

    <nav>
        <a href="index.html">Inicio</a>
        <div class="dropdown">
            <a href="#" class="dropbtn">Episodios</a>
            <div class="dropdown-content">
                <a href="ep1.html">Esperanza y Sentimiento</a>
            </div>
        </div>
        <div class="dropdown">
            <a href="#" class="dropbtn">Poemas</a>
            <div class="dropdown-content">
                <a href="poema1.html">Ella</a>
                 <a href="poema2.html">Luz que acompaña</a>
            </div>
        </div>
    </nav>

    <div class="content">
        <h2>Cuando el pecho se queda vacío</h2>
        <p>Hay días en los que el pecho se queda vacío y la casa suena distinto. No pasa siempre por algo grande: a
            veces las peleas de siempre, un mensaje que no llegó, o el silencio entre dos personas, y de repente todo se
            desestabiliza.</p>
        <p>Hay una doble sensación que me repite: por un lado la vergüenza de volver a caer; por otro, la extraña
            familiaridad de saber cómo volver a levantarse. No es lo mismo que estar bien —es saber que existen maneras
            de atenuar el ruido.</p>
        <p>Para mí, las pequeñas cosas importan más que los grandes planes: una hora con la guitarra, cinco páginas de
            un libro, salir a cambiar de aire aunque sea cinco minutos, bañarme y obligarme a cenar. Son rituales que
            parecen tontos hasta que empezás a sumarlos y descubrís que hacen una red debajo tuyo.</p>
        <p>La terapia me enseñó esto: no exigirme perfección, sí observar patrones. Cuando siento ese hueco en el pecho,
            intento tres cosas sencillas: respirar contando hasta cuatro, escribir una página aunque sean frases torpes,
            y mandar un mensaje corto a alguien aunque no piense que me va a contestar. No es glamour, pero funciona a
            veces.</p>
        <p>Si estás pasando por algo parecido, no esperes a que todo cambie para cuidarte. Empezá por una pequeña cosa:
            caminar veinte minutos, poner una canción que te mueva, o escribir solo una frase sobre cómo te sentís. No
            es poco.</p>
        <p>Y si querés, dejá una nota abajo. No prometo soluciones, pero prometo que alguien leyó lo que sentiste. A
            veces basta con eso.</p>
    </div>

    <div class="comentarios-container">
  <h2>Dejá tu comentario</h2>

  <input id="nombre" placeholder="Tu nombre o alias" />

  <textarea id="comentario" placeholder="Escribí tu comentario aquí"></textarea>

  <button onclick="enviarComentario()">Enviar comentario</button>

  <h3>Comentarios:</h3>
  <div id="listaComentarios"></div>
</div>

    <footer>
        Creado por IA - CR
    </footer>

    <script>
function toggleTheme() {
document.body.classList.toggle('light-mode');
}
</script>

<script type="module">
  // Firebase imports
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCrcCEgRb2K17TQq2LoEVJhPayHLjF3S_k",
    authDomain: "susurros-desde-la-ventana.firebaseapp.com",
    projectId: "susurros-desde-la-ventana",
    storageBucket: "susurros-desde-la-ventana.firebasestorage.app",
    messagingSenderId: "56714635794",
    appId: "1:56714635794:web:474e3c63dfa5dfbc5b06cb",
    measurementId: "G-NLLJYW55ZR"
  };

  // Init
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ENVIAR COMENTARIO
  async function enviarComentario() {
    const nombre = document.getElementById("nombre").value;
    const comentario = document.getElementById("comentario").value;

    if (!nombre || !comentario) {
      alert("Por favor completa ambos campos.");
      return;
    }

    await addDoc(collection(db, "comentarios"), {
      nombre: nombre,
      comentario: comentario,
      fecha: new Date().toISOString()
    });

    document.getElementById("nombre").value = "";
    document.getElementById("comentario").value = "";

    cargarComentarios();
  }

  // CARGAR COMENTARIOS
  async function cargarComentarios() {
    const contenedor = document.getElementById("listaComentarios");
    contenedor.innerHTML = "";

    const querySnapshot = await getDocs(collection(db, "comentarios"));

    querySnapshot.forEach((doc) => {
      const data = doc.data();
      const div = document.createElement("div");
      div.className = "comentario";
      div.innerHTML = `
        <strong>${data.nombre}</strong><br>
        <p>${data.comentario}</p>
        <small>${new Date(data.fecha).toLocaleString()}</small>
        <hr>
      `;
      contenedor.appendChild(div);
    });
  }

  // Cargar al entrar
  cargarComentarios();
</script>




</body>

</html>